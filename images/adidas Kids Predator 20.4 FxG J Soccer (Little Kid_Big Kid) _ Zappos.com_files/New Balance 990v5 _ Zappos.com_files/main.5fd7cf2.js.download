var Protobuf={Messages:{}};
Protobuf.Messages.zfcCookie={"zfc.Cookie.Session":{1:{rule:"required",name:"timestamp",type:"uint64"},2:{rule:"required",name:"connection",type:"uint64"},3:{rule:"optional",name:"timestamp2",type:"uint64"},fields:["1","2","3"]},"zfc.Cookie.Test":{1:{rule:"required",name:"name",type:"string"},2:{rule:"optional",name:"index",type:"uint32"},3:{rule:"optional",name:"phase",type:"uint32"},4:{rule:"optional",name:"active",type:"bool"},5:{rule:"optional",name:"timestamp",type:"uint64"},fields:["1","2","3",
"4","5"]},"zfc.Cookie":{1:{rule:"required",name:"session",code:"zfc.Cookie.Session"},2:{rule:"repeated",name:"tests",code:"zfc.Cookie.Test"},fields:["1","2"]}};
Protobuf.Messages.zfcEvent={imports:["zfcCheckoutEvent","zfcHydra","zfcPlatform","zfcProductPageViewEvent","zfcRecommendationEvent"],"zfc.EventBundle.Event":{1:{rule:"required",name:"type",type:"string"},2:{rule:"optional",name:"payload",type:"string"},3:{rule:"optional",name:"metadata",type:"string"},4:{rule:"optional",name:"timestamp",type:"uint64"},6:{rule:"optional",name:"subsiteId",type:"uint32"},1E3:{rule:"optional",name:"checkout",code:"zfc.CheckoutEvent"},1001:{rule:"optional",name:"product",
code:"zfc.ProductPageViewEvent"},fields:"1 2 3 4 6 1000 1001".split(" ")},"zfc.EventBundle":{1:{rule:"optional",name:"uuid",type:"string"},2:{rule:"optional",name:"counter",type:"uint32"},3:{rule:"repeated",name:"events",code:"zfc.EventBundle.Event"},4:{rule:"repeated",name:"hydra",code:"zfc.Hydra"},5:{rule:"optional",name:"upstreamUri",type:"string"},6:{rule:"optional",name:"legacyCustomerId",type:"string"},7:{rule:"optional",name:"amazonCustomerId",type:"string"},8:{rule:"optional",name:"platform",
code:"zfc.Platform"},fields:"12345678".split("")}};Protobuf.Messages.zfcHydra={"zfc.Hydra.Treatment":{1:"ASSIGNED",2:"APPLIED",3:"REASSIGNED",4:"REMOVED",type:"enum",ASSIGNED:"1",APPLIED:"2",REASSIGNED:"3",REMOVED:"4"},"zfc.Hydra":{1:{rule:"required",name:"name",type:"string"},2:{rule:"required",name:"treatment",code:"zfc.Hydra.Treatment"},3:{rule:"optional",name:"index",type:"uint32"},4:{rule:"optional",name:"lastIndex",type:"uint32"},fields:["1","2","3","4"]}};
Protobuf.Messages.zfcImpression={imports:["zfcLazyEye"],"zfc.ImpressionBundle.TreeDictEntry":{1:{rule:"required",name:"id",type:"uint32"},2:{rule:"repeated",name:"tree",code:"zfc.LazyEye.Event.Node"},fields:["1","2"]},"zfc.ImpressionBundle.Impression":{1:{rule:"required",name:"element",code:"zfc.LazyEye.Event.Element"},2:{rule:"required",name:"context",type:"uint32"},3:{rule:"required",name:"timestamp",type:"uint64"},4:{rule:"required",name:"duration",type:"uint64"},fields:["1","2","3","4"]},"zfc.ImpressionBundle":{1:{rule:"required",
name:"uuid",type:"string"},2:{rule:"required",name:"counter",type:"uint32"},3:{rule:"repeated",name:"impressions",code:"zfc.ImpressionBundle.Impression"},4:{rule:"repeated",name:"treeDict",code:"zfc.ImpressionBundle.TreeDictEntry"},fields:["1","2","3","4"]}};
Protobuf.Messages.zfcLazyEye={imports:["zfcHydra"],"zfc.LazyEye.Event.Type":{1:"CLICK",2:"CHANGE",3:"CONTEXTMENU",4:"ERROR",5:"SUBMIT",6:"REDIRECT",type:"enum",CLICK:"1",CHANGE:"2",CONTEXTMENU:"3",ERROR:"4",SUBMIT:"5",REDIRECT:"6"},"zfc.LazyEye.Event.Value":{1:{rule:"required",name:"value",type:"string"},2:{rule:"optional",name:"truncated",type:"bool"},fields:["1","2"]},"zfc.LazyEye.Event.Node":{1:{rule:"required",name:"name",type:"string"},2:{rule:"optional",name:"id",type:"string"},fields:["1",
"2"]},"zfc.LazyEye.Event.Image":{1:{rule:"required",name:"src",type:"string"},2:{rule:"optional",name:"title",code:"zfc.LazyEye.Event.Value"},3:{rule:"optional",name:"alt",code:"zfc.LazyEye.Event.Value"},fields:["1","2","3"]},"zfc.LazyEye.Event.Input":{1:{rule:"required",name:"type",type:"string"},2:{rule:"optional",name:"name",type:"string"},3:{rule:"optional",name:"checked",type:"bool"},4:{rule:"optional",name:"disabled",type:"bool"},fields:["1","2","3","4"]},"zfc.LazyEye.Event.Select":{1:{rule:"required",
name:"name",type:"string"},2:{rule:"required",name:"value",type:"string"},3:{rule:"required",name:"text",type:"string"},4:{rule:"optional",name:"multiple",type:"bool"},fields:["1","2","3","4"]},"zfc.LazyEye.Event.Offset":{1:{rule:"required",name:"left",type:"uint64"},2:{rule:"required",name:"top",type:"uint64"},3:{rule:"required",name:"width",type:"uint64"},4:{rule:"required",name:"height",type:"uint64"},fields:["1","2","3","4"]},"zfc.LazyEye.Event.Form.Field":{1:{rule:"required",name:"element",code:"zfc.LazyEye.Event.Node"},
2:{rule:"optional",name:"input",code:"zfc.LazyEye.Event.Value"},3:{rule:"optional",name:"type",type:"string"},fields:["1","2","3"]},"zfc.LazyEye.Event.Form":{1:{rule:"optional",name:"name",type:"string"},2:{rule:"optional",name:"action",type:"string"},3:{rule:"optional",name:"method",type:"string"},4:{rule:"repeated",name:"fields",code:"zfc.LazyEye.Event.Form.Field"},fields:["1","2","3","4"]},"zfc.LazyEye.Event.Element":{1:{rule:"required",name:"node",code:"zfc.LazyEye.Event.Node"},2:{rule:"repeated",
name:"classNames",type:"string"},3:{rule:"optional",name:"href",type:"string"},4:{rule:"optional",name:"image",code:"zfc.LazyEye.Event.Image"},5:{rule:"optional",name:"text",code:"zfc.LazyEye.Event.Value"},6:{rule:"optional",name:"input",code:"zfc.LazyEye.Event.Input"},7:{rule:"optional",name:"select",code:"zfc.LazyEye.Event.Select"},8:{rule:"optional",name:"offset",code:"zfc.LazyEye.Event.Offset"},9:{rule:"optional",name:"form",code:"zfc.LazyEye.Event.Form"},fields:"123456789".split("")},"zfc.LazyEye.Event":{1:{rule:"required",
name:"counter",type:"uint64"},2:{rule:"required",name:"timestamp",type:"uint64"},3:{rule:"required",name:"timeOnPage",type:"uint64"},4:{rule:"optional",name:"pageX",type:"uint64"},5:{rule:"optional",name:"pageY",type:"uint64"},6:{rule:"required",name:"windowWidth",type:"uint64"},7:{rule:"required",name:"windowHeight",type:"uint64"},8:{rule:"required",name:"target",code:"zfc.LazyEye.Event.Element"},9:{rule:"optional",name:"anchor",code:"zfc.LazyEye.Event.Element"},10:{rule:"optional",name:"upstreamUri",
type:"string"},11:{rule:"repeated",name:"nodeTree",code:"zfc.LazyEye.Event.Node"},12:{rule:"optional",name:"type",code:"zfc.LazyEye.Event.Type"},13:{rule:"optional",name:"attempts",type:"uint32"},14:{rule:"repeated",name:"hydra",code:"zfc.Hydra"},fields:"1 2 3 4 5 6 7 8 9 10 11 12 13 14".split(" ")},"zfc.LazyEye":{1:{rule:"repeated",name:"events",code:"zfc.LazyEye.Event"},fields:["1"]}};
Protobuf.Messages.zfcOnload={"zfc.Onload.Checkpoint":{1:{rule:"optional",name:"label",type:"string"},2:{rule:"required",name:"time",type:"uint32"},3:{rule:"required",name:"msec",type:"uint32"},fields:["1","2","3"]},"zfc.Onload.Error":{1:{rule:"required",name:"msg",type:"string"},2:{rule:"required",name:"url",type:"string"},3:{rule:"required",name:"line",type:"uint32"},fields:["1","2","3"]},"zfc.Onload":{1:{rule:"required",name:"uuid",type:"string"},2:{rule:"required",name:"upstreamUuid",type:"string"},
3:{rule:"optional",name:"pageGenerationTime",type:"uint32"},4:{rule:"optional",name:"pageGenerationMsec",type:"uint32"},5:{rule:"optional",name:"enterHeadTime",type:"uint32"},6:{rule:"optional",name:"enterHeadMsec",type:"uint32"},7:{rule:"optional",name:"leaveBodyTime",type:"uint32"},8:{rule:"optional",name:"leaveBodyMsec",type:"uint32"},9:{rule:"optional",name:"onloadTime",type:"uint32"},10:{rule:"optional",name:"onloadMsec",type:"uint32"},11:{rule:"optional",name:"upstreamHost",type:"string"},12:{rule:"optional",
name:"upstreamUri",type:"string"},13:{rule:"optional",name:"pageGeneration",code:"zfc.Onload.Checkpoint"},14:{rule:"optional",name:"enterHead",code:"zfc.Onload.Checkpoint"},15:{rule:"optional",name:"leaveBody",code:"zfc.Onload.Checkpoint"},16:{rule:"optional",name:"onload",code:"zfc.Onload.Checkpoint"},17:{rule:"repeated",name:"checkpoints",code:"zfc.Onload.Checkpoint"},18:{rule:"optional",name:"exited",type:"bool"},19:{rule:"repeated",name:"errors",code:"zfc.Onload.Error"},fields:"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" ")}};
Protobuf.Messages.zfcTracker={imports:["zfcHydra"],"zfc.Tracker.Var":{1:{rule:"required",name:"name",type:"string"},2:{rule:"optional",name:"value",type:"string"},fields:["1","2"]},"zfc.Tracker":{1:{rule:"required",name:"locationHref",type:"string"},2:{rule:"required",name:"upstreamLabel",type:"string"},3:{rule:"required",name:"upstreamHost",type:"string"},4:{rule:"required",name:"upstreamUri",type:"string"},5:{rule:"optional",name:"pageGenerationTime",type:"uint32"},6:{rule:"optional",name:"pageGenerationMsec",
type:"uint32"},7:{rule:"optional",name:"enterHeadTime",type:"uint32"},8:{rule:"optional",name:"enterHeadMsec",type:"uint32"},9:{rule:"optional",name:"leaveBodyTime",type:"uint32"},10:{rule:"optional",name:"leaveBodyMsec",type:"uint32"},11:{rule:"optional",name:"screenWidth",type:"uint32"},12:{rule:"optional",name:"screenHeight",type:"uint32"},13:{rule:"optional",name:"screenColorDepth",type:"uint32"},14:{rule:"optional",name:"documentReferrer",type:"string"},15:{rule:"optional",name:"upstreamMetadata",
type:"string"},16:{rule:"optional",name:"windowId",type:"string"},17:{rule:"optional",name:"windowWidth",type:"uint32"},18:{rule:"optional",name:"windowHeight",type:"uint32"},19:{rule:"repeated",name:"vars",code:"zfc.Tracker.Var"},20:{rule:"repeated",name:"hydra",code:"zfc.Hydra"},99:{rule:"optional",name:"uuid",type:"string"},fields:"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 99".split(" ")}};
Protobuf.Messages.zfcCheckoutEvent={imports:["zfcProductData"],"zfc.CheckoutEvent":{1:{rule:"optional",name:"amazonPurchaseId",type:"string"},2:{rule:"optional",name:"amazonPhysicalOrderId",type:"string"},3:{rule:"optional",name:"amazonDigitalOrderId",type:"string"},4:{rule:"optional",name:"legacyOrderId",type:"string"},5:{rule:"optional",name:"shipping",type:"string"},6:{rule:"optional",name:"tax",type:"string"},7:{rule:"optional",name:"subtotal",type:"string"},8:{rule:"optional",name:"total",type:"string"},
9:{rule:"optional",name:"fraud",type:"bool"},10:{rule:"optional",name:"employee",type:"bool"},11:{rule:"repeated",name:"orderItem",code:"zfc.ProductData"},fields:"1 2 3 4 5 6 7 8 9 10 11".split(" ")}};
Protobuf.Messages.zfcProductData={"zfc.ProductData":{1:{rule:"optional",name:"productId",type:"uint32"},2:{rule:"optional",name:"styleId",type:"uint32"},3:{rule:"optional",name:"colorId",type:"uint32"},4:{rule:"optional",name:"stockId",type:"uint32"},5:{rule:"optional",name:"asin",type:"string"},6:{rule:"repeated",name:"taxonomyCategoryId",type:"uint32"},fields:"123456".split("")}};
Protobuf.Messages.zfcPlatform={"zfc.Platform.PlatformType":{0:"CHROME_OS",1:"BLACKBERRY",2:"UNKNOWN",3:"LINUX",4:"IOS",5:"MAC_OSX",6:"WINDOWS_PHONE",7:"WINDOWS",8:"ANDROID",type:"enum",CHROME_OS:"0",BLACKBERRY:"1",UNKNOWN:"2",LINUX:"3",IOS:"4",MAC_OSX:"5",WINDOWS_PHONE:"6",WINDOWS:"7",ANDROID:"8"},"zfc.Platform":{1:{rule:"optional",name:"platformType",code:"zfc.Platform.PlatformType"},2:{rule:"optional",name:"osVersion",type:"string"},3:{rule:"optional",name:"browser",type:"string"},4:{rule:"optional",
name:"browserVersion",type:"string"},5:{rule:"optional",name:"screenWidth",type:"uint64"},6:{rule:"optional",name:"screenHeight",type:"uint64"},7:{rule:"optional",name:"appVersion",type:"string"},8:{rule:"optional",name:"deviceId",type:"string"},9:{rule:"optional",name:"deviceBuild",type:"string"},10:{rule:"optional",name:"deviceAdvertisingId",type:"string"},fields:"1 2 3 4 5 6 7 8 9 10".split(" ")}};
Protobuf.Messages.zapposBrandSearch={"zappos.BrandSearch":{10:{rule:"required",name:"brandId",type:"uint32"},44:{rule:"optional",name:"history",type:"uint32"},fields:["10","44"]}};
Protobuf.Extensions={"zfc.LazyEye.Event":{100:{rule:"optional",name:"pageTransition",code:"zfc.PageTransition"},fields:["100"],names:["imports","zfc.PageTransition.Page","zfc.PageTransition"],imports:["zfcLazyEye"],"zfc.PageTransition.Page":{1:{rule:"required",name:"uuid",type:"string"},2:{rule:"required",name:"windowId",type:"string"},fields:["1","2"]},"zfc.PageTransition":{1:{rule:"required",name:"source",code:"zfc.PageTransition.Page"},2:{rule:"optional",name:"destination",code:"zfc.PageTransition.Page"},
fields:["1","2"]}},"zfc.Tracker":{100:{rule:"optional",name:"sourceClick",code:"zfc.SourceClick"},fields:["100"],names:["imports","zfc.SourceClick"],imports:["zfcTracker"],"zfc.SourceClick":{1:{rule:"required",name:"windowId",type:"string"},2:{rule:"required",name:"counter",type:"uint32"},fields:["1","2"]}}};var JSON;JSON||(JSON={});
(function(){function g(c){return 10>c?"0"+c:c}function b(c){e.lastIndex=0;return e.test(c)?'"'+c.replace(e,function(c){var d=h[c];return"string"===typeof d?d:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function f(h,a){var e,g,p,u,t=d,v,q=a[h];q&&"object"===typeof q&&"function"===typeof q.toJSON&&(q=q.toJSON(h));"function"===typeof k&&(q=k.call(a,h,q));switch(typeof q){case "string":return b(q);case "number":return isFinite(q)?String(q):"null";case "boolean":case "null":return String(q);
case "object":if(!q)return"null";d+=c;v=[];if("[object Array]"===Object.prototype.toString.apply(q)){u=q.length;for(e=0;e<u;e+=1)v[e]=f(e,q)||"null";p=0===v.length?"[]":d?"[\n"+d+v.join(",\n"+d)+"\n"+t+"]":"["+v.join(",")+"]";d=t;return p}if(k&&"object"===typeof k)for(u=k.length,e=0;e<u;e+=1)"string"===typeof k[e]&&(g=k[e],(p=f(g,q))&&v.push(b(g)+(d?": ":":")+p));else for(g in q)Object.prototype.hasOwnProperty.call(q,g)&&(p=f(g,q))&&v.push(b(g)+(d?": ":":")+p);p=0===v.length?"{}":d?"{\n"+d+v.join(",\n"+
d)+"\n"+t+"}":"{"+v.join(",")+"}";d=t;return p}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(c){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+g(this.getUTCMonth()+1)+"-"+g(this.getUTCDate())+"T"+g(this.getUTCHours())+":"+g(this.getUTCMinutes())+":"+g(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(c){return this.valueOf()});var a=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d,c,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(h,a,e){var b;c=d="";if("number"===typeof e)for(b=0;b<e;b+=1)c+=" ";else"string"===typeof e&&(c=e);if((k=a)&&"function"!==typeof a&&("object"!==typeof a||"number"!==typeof a.length))throw Error("JSON.stringify");return f("",{"":h})});
"function"!==typeof JSON.parse&&(JSON.parse=function(c,d){function h(c,a){var e,k,b=c[a];if(b&&"object"===typeof b)for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(k=h(b,e),void 0!==k?b[e]=k:delete b[e]);return d.call(c,a,b)}var e;c=String(c);a.lastIndex=0;a.test(c)&&(c=c.replace(a,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+c+")"),"function"===typeof d?h({"":e},""):e;throw new SyntaxError("JSON.parse");})})();
(function(g,b){var f=g.Annapurna=g.Annapurna||{};f.forEach=function(a,e){var d,c;if(a)for(d=0,c=a.length;d<c;d++)e.call(this,a[d],d)};f.hasKeys=function(a){for(var e in a)return!0;return!1};f.inArray=function(a,e){if("object"===typeof e&&e.length)for(var d=0,c=e.length;d<c;d++)if(a===e[d])return!0;return!1};f.iterateArray=function(a,e,d,c){function h(){for(var f=c.chunk;f--&&k<b;)e(a[k]),++k;k<b?setTimeout(h,1):d&&d()}var k=0,b=a.length;c=c||{};c.chunk=c.chunk||100;h()};f.lastElement=function(a){var e;
if(a&&(e=a.length))return a[e-1]};f.callbackDelegator=function(a,e){var d,c,h,k=[];if(a&&e)for(d=0,c=e.length;d<c;d++)e[d]&&("object"===typeof e[d]?(h=e[d].shift(),k=e[d]):h=e[d]),"function"===typeof a[h]?a[h].apply(a,k):console.error("No callback was found for: "+h)};f.firePixel=function(a,e,d){var c;a&&e&&(c=new Image,d&&(c.onload=d),c.src=a+"?"+e)};f.error=function(a){var e=window.onerror;e&&"function"===typeof e&&e(a,"Annapurna/5fd7cf2")};f.extend=function(a,e){var d=function(){};d.prototype=e.prototype;
a.prototype=new d;a.prototype.constructor=a;a.superclass=e.prototype;e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)};f.implement=function(a,e){f.forEach(e,function(d,c){a.prototype[d]=function(){throw Error("The method "+d+" must be implemented by any Class which extends it.");}})}})(window,document);
(function(g){g.Cookies=function(b){if(!(this instanceof g.Cookies))return new g.Cookies(b);this.name=b};g.Cookies.prototype={read:function(){for(var b=this.name+"=",f=document.cookie.split(";"),a,e=0;e<f.length;e++){for(a=f[e];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(b))return a.substring(b.length,a.length)}return null},write:function(b,f,a){var e;f?(e=new Date,e.setTime(e.getTime()+864E5*f),f="; expires="+e.toGMTString()):f="";document.cookie=this.name+"="+b+f+"; path=/"+(a&&
""!==a?"; domain="+a:"")},erase:function(b){this.write("",-1,b)}}})(Annapurna);
(function(g){g.string={trim:function(b){if("string"===typeof b)return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},truncateValue:function(b,f,a){var e=!1;if(b=g.string.trim(b))return b.length>f&&(b=b.substring(0,f),e=!0),a.call(this,b,e)},capFirstLetter:function(b){return b.charAt(0).toUpperCase()+b.slice(1)},splitOnSpaces:function(b){var f=[],a=[],e;if(b&&"string"===typeof b){if(b.match(/ /g)){f=b.split(" ");b=0;for(e=f.length;b<e;b++)a.push(f[b]);return a}return[b]}},utf8Encode:function(b){var f=
"",a,e,d,c=String.fromCharCode;if(b)if("string"!==typeof b&&b.toString&&(b=b.toString()),"string"===typeof b)for(a=0,e=b.length;a<e;a++)d=b.charCodeAt(a),128>d?f+=c(d):2048>d?(f+=c(d>>6|192),f+=c(d&63|128)):65536>d&&(f+=c(d>>12|224),f+=c(d>>6&63|128),f+=c(d&63|128));else this.utf8Error(b);return f},utf8Decode:function(b){var f="",a,e,d,c,h,k=String.fromCharCode;if(b)if("string"!==typeof b&&b.toString&&(b=b.toString()),"string"===typeof b)for(a=0,e=b.length;a<e;a++)d=b.charCodeAt(a),128>d?f+=k(d):
192<=d&&224>d&&a<e-1?(c=b.charCodeAt(++a),128<=c&&192>c&&(d=(d&31)<<6|c&63,f+=k(d))):224<=d&&240>d&&a<e-2&&(c=b.charCodeAt(++a),h=b.charCodeAt(++a),128<=c&&192>c&&128<=h&&192>h&&(d=(d&15)<<12|(c&63)<<6|h&63,f+=k(d)));else this.utf8Error(b);return f},utf8Error:function(b){b&&("object"===typeof b&&b.nodeName?g.error("utf8Encode: Encountered an Object with the following attributes: id="+b.id+"||class="+b.className+"||nodeName:"+b.nodeName+"||name:"+b.name):g.error("utf8Encode: Encountered a non-string with value "+
b))},normalize:function(b){if(b)return b.replace(/[^\w']/g," ").replace(/\s+/g," ").replace(/(^\s+|\'|\s+$)/g,"").toLowerCase()}}})(Annapurna);
(function(g){function b(){if(!(this instanceof g.Protobuf))return new g.Protobuf;this.descriptor={};this.extensions={};this.extensionCallbacks=[]}var f=function(){for(var d={},c=4;20>c;c++)d[c]=Math.pow(2,7*c);return d}(),a=[],e={extensions:[],base:{}};b.prototype.setDescriptor=function(d){this.descriptor=d;d.imports&&(this.loadImports(d.imports),this.descriptor.loadedImports=!0);return this};b.prototype.setExtensions=function(d){this.extensions=d;return this};b.prototype.getExtensions=function(){return g.hasKeys(self.extensions)?
self.extensions:e.extensions};b.prototype.addExtension=function(d,c){this.extensionCallbacks.push({name:d,fn:c});return this};b.prototype.setMessageExtensions=function(){var d,c,h,e,b,f;f=this.getExtensions();for(d in this.descriptor)if(!g.inArray(d,a)){if(f[d]){if(c=f[d].fields)for(e=0,b=c.length;e<b;e++)h=c[e],this.descriptor[d].fields.push(h),this.descriptor[d][h]=f[d][h];if(c=f[d].names)for(e=0,b=c.length;e<b;e++)h=c[e],this.descriptor[h]=f[d][h]}a.push(d)}};b.prototype.accumulatedExtensionFields=
function(d){var c,h,a;c=0;for(h=this.extensionCallbacks.length;c<h;c++)a=this.extensionCallbacks[c],d[a.name]=a.fn.call(this,d);return d};b.prototype.decode=function(d,c){if(this.descriptor)return this.setMessageExtensions(),this.decodeMessage(d,c,{});console.error("The descriptor setter must be used in order to decode.")};b.prototype.decodeMessage=function(d,c,h){var a,e,b,f;for(c={pointer:0,message:c};c.pointer<c.message.length;)a=this.decodeVarint(c),e=a&7,b=a>>3,(a=this.descriptor[d][b])?(b=this.decodeField(c,
e),e=a.name,(f=a.code)?this.descriptor[f]?b="enum"===this.descriptor[f].type?this.descriptor[f][b]:this.decodeMessage(f,b,{}):console.error("No root type was found for",f,"with descriptor",this.descriptor):b=this.processByType(b,a,"post"),"repeated"===a.rule?h[e]?h[e].push(b):h[e]=[b]:h[e]=b):(console.log(d+": skipping unknown field "+b+" (wire type "+e+")"),this.decodeField(c,e));return h};b.prototype.encode=function(d,c){this.setMessageExtensions();return this.encodeMessage(d,c)};b.prototype.encodeMessage=
function(d,c){var h,a,e,b,f,g,p="",u={},t=[];c=this.accumulatedExtensionFields(c);if(!c||!this.descriptor[d])return"";u=this.descriptor[d];t=u.fields;h=0;for(a=t.length;h<a;h++)b=t[h],e=u[b],f=c[e.name],"undefined"!==typeof f&&null!==f&&(e.code?this.descriptor[e.code]?g="enum"===this.descriptor[e.code].type?this.processEnum:this.processMessage:console.error("No root type was found for",e.code,"with descriptor",this.descriptor):g=this.processField,p+=this.encodeField(b,e,f,g));return p};b.prototype.processByType=
function(d,c,h){return c.type&&(c=h+"process"+g.string.capFirstLetter(c.type),this[c]&&"function"===typeof this[c])?this[c].call(this,d):d};b.prototype.processEnum=function(d,c){return Number(this.descriptor[d.code][c])};b.prototype.processMessage=function(d,c){return this.encodeMessage(d.code,c)};b.prototype.processField=function(d,c){return this.processByType(c,d,"pre")};b.prototype.encodeValue=function(d,c,h,a){var e="",b=this.encodeVarint;h=a.call(this,c,h);"number"===typeof h?isNaN(h)||(e=b(d<<
3)+b(h)):void 0!==h&&""!==h&&null!==h&&(e=b(d<<3|2)+b(h.length)+h);return e};b.prototype.encodeField=function(d,c,h,a){var e,b,f="";if("repeated"===c.rule)for(e=0,b=h.length;e<b;e++)f+=this.encodeValue(d,c,h[e],a);else f+=this.encodeValue(d,c,h,a);return f};b.prototype.preprocessBool=function(d){return d?1:0};b.prototype.preprocessString=function(d){return g.string.utf8Encode(d)};b.prototype.postprocessString=function(d){return g.string.utf8Decode(d)};b.prototype.decodeField=function(d,c){return 2===
c?this.decodeLengthDelimited(d):this.decodeVarint(d)};b.prototype.decodeVarint=function(d){for(var c=0,h=0,a;(a=d.message.charCodeAt(d.pointer++))&&(h+=4>c?(a&127)<<7*c++:(a&127)*f[c++],a&128););return h};b.prototype.decodeLengthDelimited=function(d){var c=this.decodeVarint(d),h=d.message.substring(d.pointer,d.pointer+c);d.pointer+=c;return h};b.prototype.encodeVarint=function(d){var c="",h=String.fromCharCode,a=Math.floor;do c=128<=d?c+h(d&127|128):c+h(d);while(d=4294967296>d?d>>>7:a(d/128));return c};
b.prototype.loadImports=function(d){var c,h,a,b,f,g;if(d&&d.length&&!this.descriptor.loadedImports)for(c=0,h=d.length;c<h;c++)if(a=d[c],f=e.base[a])for(b in f)this.descriptor[b]||(g=f[b],this.descriptor[b]=g,this.loadImports(e.base[a].imports))};b.config=function(d){e=d};g.Protobuf=b})(Annapurna);
Annapurna.Base64=function(g){function b(b,a){return KEY_STR.indexOf(b.charAt(a))}KEY_STR=g.__="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(b){for(var a=KEY_STR,e,d,c,h=b.length,k=0,l="";2<h;)e=b.charCodeAt(k++)&255,d=b.charCodeAt(k++)&255,c=b.charCodeAt(k++)&255,l+=a.charAt(e>>>2&63),l+=a.charAt((e&3)<<4|d>>>4),l+=a.charAt((d&15)<<2|c>>>6),l+=a.charAt(c&63),h-=3;h&&(e=b.charCodeAt(k++),l+=a.charAt(e>>>2&63),1==h?(l+=a.charAt((e&3)<<4),l+="="):(d=b.charCodeAt(k++),
l+=a.charAt((e&3)<<4|d>>>4),l+=a.charAt((d&15)<<2)),l+="=");return l},decode:function(f){for(var a=String,e="",d=0,c,h,k,l,g;d<f.length;)c=b(f,d++),h=b(f,d++),l=b(f,d++),g=b(f,d++),c=c<<2|h>>4,h=(h&15)<<4|l>>2,k=(l&3)<<6|g,e+=a.fromCharCode(c),64!=l&&(e+=a.fromCharCode(h)),64!=g&&(e+=a.fromCharCode(k));return e}}}(window);
(function(g,b,f){g.Dom={getWindowWidth:function(){return b.innerWidth||f.documentElement.clientWidth},getWindowHeight:function(){return b.innerHeight||f.documentElement.clientHeight}}})(Annapurna,window,document);
(function(g,b){function f(a){var d,c={target:a.target||a.srcElement,pageX:a.pageX||a.clientX,pageY:a.pageY||a.clientY};for(d in c)a[d]=c[d]}var a={bind:{},unbind:{}};g.addEvent=function(e,d,c){a.bind[d]?a.bind[d].call(a,e,d,c):a.on.call(a,e,d,c)};g.removeEvent=function(e,d,c){a.unbind[d]?a.unbind[d].call(a,e,d,c):a.off.call(a,e,d,c)};g.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return a};a.on=function(e,d,c){a.on=b.addEventListener?function(c,d,a){c&&c.addEventListener(d,
a,!1)}:function(c,d,a){var e,b=d+a;c&&(c["e"+b]=a,c[b]=function(){e=window.event;f(e);c["e"+b](e)},c.attachEvent("on"+d,c[b]))};if(e&&d&&c)a.on(e,d,c)};a.off=function(a,d,c){this.off=b.addEventListener?function(c,d,a){c&&c.addEventListener(d,a,!1)}:function(c,d,a){var e,b=d+a;c&&(c["e"+b]=a,c[b]=function(){e=window.event;f(e);c["e"+b](e)},c.attachEvent("on"+d,c[b]))};a&&d&&c&&this.off(a,d,c)};a.bind.submit=function(a,d,c){var h=this;if(a&&("FORM"===a.nodeName||"onsubmit"in b.documentElement))h.on(a,
d,c);else h.on(b.body,"click",function(a){a=a.target;!a.form||"BUTTON"!==a.nodeName&&"INPUT"!==a.nodeName||(a=a.form,a.getAttribute("data-submit-event")||(a.setAttribute("data-submit-event","1"),h.on(a,d,c)))})}})(Annapurna,document);
(function(g){var b=function(){if(!(this instanceof b))return new b;this.hash={};this.setup()};g.implement(b,["getData","writeData","flushData"]);b.prototype.set=function(b,a){"undefined"!==typeof a&&this.hash&&(this.hash[b]=a,this.refresh());return this};b.prototype.get=function(b){if(this.hash&&(b=this.hash[b],"undefined"!==typeof b))return b};b.prototype.remove=function(b){this.hash&&this.hash[b]&&(delete this.hash[b],this.refresh())};b.prototype.flush=function(){this.flushData.call(this)};b.prototype.getFields=
function(){if(this.hash)return this.hash};b.prototype.hasFields=function(){return g.hasKeys(this.hash)};b.prototype.setup=function(){var b=this.getData();if(b&&""!==b){try{this.hash=JSON.parse(b)}catch(a){this.reset()}"object"===typeof this.hash||this.hasDefaultValues()||this.reset()}else this.reset()};b.prototype.reset=function(){this.hash={};this.setDefaultValues()};b.prototype.refresh=function(){"function"===typeof JSON.stringify&&this.writeData.call(this,JSON.stringify(this.hash),this.hash)};
b.prototype.setDefaultValues=function(){var b={},a;if(b=this.getDefaultValues()){for(a in b)this.hash[a]=b[a];this.refresh()}};b.prototype.hasDefaultValues=function(){var b,a=this.getDefaultValues();if(!a)return!0;for(b in a)if(this.hash[b])return!0};b.prototype.getDefaultValues=function(){};g.JSONDataFormatter=b})(Annapurna);
(function(g){var b=function(f,a,e){if(!(this instanceof b))return new b(f,a,e);this.cookie=g.Cookies(f);this.expire=a;this.domain=e;b.superclass.constructor.call(this)};g.extend(b,g.JSONDataFormatter);b.prototype.getData=function(){return this.cookie.read()};b.prototype.flushData=function(){this.cookie.erase(this.domain)};b.prototype.writeData=function(b,a){g.hasKeys(a)&&this.cookie.write(b,this.expire,this.domain)};g.CookieStorage=b})(Annapurna);
(function(g,b){var f=function(){if(!(this instanceof f))return new f;f.superclass.constructor.call(this)};b.extend(f,b.JSONDataFormatter);f.prototype.getData=function(){return g.name};f.prototype.writeData=function(a){g.name=a};f.prototype.flushData=function(){g.name=""};f.prototype.getDefaultValues=function(){return{zapposWindow:!0}};b.WindowStorage=f})(window,Annapurna);
(function(g){var b=function(b){if(!(this instanceof g.PB64))return new g.PB64(b);this.protobuf=g.Protobuf().setDescriptor(b)};b.prototype.encode=function(b,a){var e=this.protobuf.encode(b,a);return g.Base64.encode(e)};b.prototype.decode=function(b,a){var e=g.Base64.decode(a);return this.protobuf.decode(b,e)};b.prototype.addExtension=function(b,a){this.protobuf.addExtension(b,a);return this};g.PB64=b})(Annapurna);
(function(g){var b={},f={},a=function(b){if(!(this instanceof a))return new a(b);this.name=b};a.prototype.subscribe=function(a){var d;if(d=f[this.name])return a.apply(d.context,d.args);b[this.name]||(b[this.name]=[]);b[this.name].push(a)};a.prototype.publish=function(){var a=Array.prototype.slice.apply(arguments),d=a.shift(),c,h,k,l=[];if(b[this.name])for(c=0,h=b[this.name].length;c<h;c++)(k=b[this.name][c].apply(d,a))&&l.push(k);f[this.name]={context:d,args:a};if(l.length)return l};a.prototype.publishFns=
function(){Array.prototype.slice.apply(arguments).shift();var a,d,c=[];if(b[this.name])for(a=0,d=b[this.name].length;a<d;a++)c.push(b[this.name][a]);return c};a.prototype.unpublish=function(){b[this.name]&&delete b[this.name]};g.Observer=a})(Annapurna);
(function(g){var b=function(){};b.prototype={push:function(b){this.fire(b)},flush:function(b){var a,e;a=0;for(e=b.length;a<e;a++)this.fire(b[a])},fire:function(b){var a="fire"+g.string.capFirstLetter(typeof b);if(this[a])this[a](b)},fireFunction:function(b){b()}};g.Queue=b})(Annapurna);
(function(g,b){var f={},a={};f.getParam=function(e){if(!g.hasKeys(a)&&b.search){var d=b.search.slice(1).split("&"),c,h,f;c=0;for(h=d.length;c<h;c++)f=d[c].split("="),f[1]||(f[1]=!0),a[f[0]]=f[1]}if(e=a[e])return e};f.replaceParam=function(a,d,c){function h(c){var a=new RegExp("\\b"+d+"=[^&]*");return a.test(c)?c.replace(a,g):c+"&"+g}var b=a.indexOf("?"),f,g=d+"="+c;++b?(f=a.substr(0,b),c=a.indexOf("#",b),-1!=c?(f=b<c?f+h(a.substr(b,c)):f+g,f+=a.substr(c)):f=b<a.length?f+h(a.substr(b)):f+g):(c=a.indexOf("#"),
f=-1!=c?a.substr(0,c)+"?"+g+a.substr(c):a+"?"+g);return f};g.Url=f})(window.Annapurna,location);
Annapurna.Observer("storage").subscribe(function(g){function b(f){if(!(this instanceof b))return new b(f);b.superclass.constructor.call(this,f)}Annapurna.extend(b,g);b.prototype.getRecord=function(){return localStorage.getItem(this.record)};b.prototype.writeRecord=function(b){localStorage.setItem(this.record,b)};b.prototype.removeRecord=function(){localStorage.removeItem(this.record)};b.prototype.supportedFeature=function(){this.supportedFeature=function(){try{if(window.localStorage)return localStorage.setItem("foo",
"bar"),localStorage.removeItem("foo"),!0}catch(b){}return!1};return this.supportedFeature()};return b});
Annapurna.Observer("storage").subscribe(function(g){function b(a){if(!(this instanceof b))return new b(a);this.setupStorage();b.superclass.constructor.call(this,a)}var f=document;Annapurna.extend(b,g);b.prototype.setupStorage=function(){this.featureIsSupported(function(){var a;try{a=new ActiveXObject("htmlfile"),a.open(),a.write('<script>document.w=window\x3c/script><iframe src="/favicon.ico"></frame>'),a.close(),this.owner=a.w.frames[0].document,this.el=this.owner.createElement("div")}catch(b){this.el=
f.createElement("div"),this.owner=f.body}this.owner.appendChild(this.el);this.el.addBehavior("#default#userData")})};b.prototype.getRecord=function(){this.el||this.setupStorage();if(this.el)return this.el.load(this.record),this.el.getAttribute(this.record)};b.prototype.writeRecord=function(a){this.el||this.setupStorage();if(this.el)try{this.el.load(this.record),this.el.setAttribute(this.record,a),this.el.save(this.record)}catch(b){b.message&&/Permission denied/.test(b.message)}};b.prototype.removeRecord=
function(){this.el||this.setupStorage();this.el&&(this.el.removeAttribute(this.record),this.el.save(this.record))};b.prototype.supportedFeature=function(){this.supportedFeature=function(){if(f.documentElement.addBehavior)try{return f.documentElement.addBehavior}catch(a){return!1}};return this.supportedFeature()};return b});
Annapurna.Observer("storage").subscribe(function(g){function b(f){if(!(this instanceof b))return new b(f);var a;(a=document.getElementById("unsupported"))||(a=document.createElement("storage"),a.id="unsupported",document.getElementsByTagName("head")[0].appendChild(a));this.el=a;b.superclass.constructor.call(this,f)}Annapurna.extend(b,g);b.prototype.getRecord=function(){return this.el.getAttribute(this.getRecordName())};b.prototype.writeRecord=function(b){this.el.setAttribute(this.getRecordName(),
b)};b.prototype.removeRecord=function(){this.el.removeAttribute(this.getRecordName())};b.prototype.getRecordName=function(){return"data-"+this.record};b.prototype.supportedFeature=function(){return!0};return b});
(function(g,b){function f(a){if(!(this instanceof f))return new f(a);this.record=a;f.superclass.constructor.call(this)}b.extend(f,b.JSONDataFormatter);f.prototype.getData=function(){var a;this.featureIsSupported(function(){a=this.getRecord.call(this)});return a};f.prototype.writeData=function(a){this.featureIsSupported(function(){this.writeRecord.call(this,a)})};f.prototype.flushData=function(){this.featureIsSupported(function(){this.removeRecord.call(this)})};f.prototype.featureIsSupported=function(a){this.supportedFeature()&&
a.call(this)};b.implement(f,["getRecord","writeRecord","removeRecord","supportedFeature"]);b.Storage=function(a){var e=b.Observer("storage").publish(this,f),d,c,h=e.length;for(c=0;c<h;c++)if(d=e[c](a),d.supportedFeature())return d;b.error("No storage was supported for "+navigator.userAgent)}})(window,Annapurna);
(function(g){function b(c){if(!(this instanceof b))return new b(c);this.url=c;this.xhr=f();this.dataType="JSON";this.method="GET"}function f(){var c;e(function(){c=new XMLHttpRequest},function(){c=new ActiveXObject("Microsoft.XMLHTTP")});return c}function a(){var c=this.xhr;e(function(){c.send(null)},function(){c.send()})}function e(c,d){window.XMLHttpRequest?c():window.ActiveXObject&&d()}function d(d){d="format_"+d;if(c[d])return c[d].call(this)}var c={};b.prototype.dataType=function(c){this.dataType=
c;return this};b.prototype.method=function(c){this.method=c;return this};b.prototype.request=function(c){var b=this;b.xhr.onreadystatechange=function(){var a={},e={};4===b.xhr.readyState&&(200===b.xhr.status?a=d.call(b,b.dataType):(e.statusCode=b.xhr.status,e.statusText=b.xhr.statusText||""),c.call(b.xhr,e,a))};b.xhr.open(b.method,b.url,!0);a.call(b)};c.format_JSON=function(){return JSON.parse(this.xhr.responseText||this.xhr.response)};c.format_HTML=function(){return this.xhr.response};c.format_TEXT=
function(){return this.xhr.response};g.Ajax=b})(Annapurna);
(function(g){function b(a,e,d){if(!(this instanceof b))return new b(a,e,d);this.key=a;this.days=e;this.callback="";this.willRepeat=!0;this.storage=g.Storage("scheduler");this.hash=this.storage.get("hash")||{}}var f=[];b.prototype.repeat=function(a){this.willRepeat=a;return this};b.prototype.operation=function(a){this.callback=a;return this};b.prototype.execute=function(){var a=+new Date,b={};(b=this.hash[this.key])?b.e&&a>b.e&&(this.callback&&this.callback.call(this,b),this.willRepeat&&this.reset(a)):
this.reset(a)};b.prototype.reset=function(a){var b=a+864E5*this.days;this.hash[this.key]={c:a,d:this.days,e:b};f.push({t:b,n:this.key});this.storage.set("hash",this.hash)};b.cleanse=function(){var a=g.Storage("scheduler"),b=a.get("bookie")||[],d=a.get("hash")||{},c,h,k,l=+new Date,b=b.concat(f);c=0;for(h=b.length;c<h;c++)k=b[c],d[k.n]&&l>d[k.n].e&&delete d[k.n],l>k.t&&(b.splice(c,1),h=b.length,c--);a.set("bookie",b).set("hash",d)};g.Scheduler=b})(Annapurna);
(function(g,b,f){function a(){if(!k){var c,d,a=e();if(a)for(c=0,d=a.length;c<d;c++)a[c]();k=!0}}function e(){switch(typeof h){case "function":return h();case "object":return h}}function d(){e();h()?a():setTimeout(d,10)}function c(){try{document.documentElement.doScroll("left")}catch(d){setTimeout(c,1);return}a()}var h,k=!1;g.domReady=function(e){var k,g;h=e;"complete"===f.readyState&&d();if(f.addEventListener)f.addEventListener("DOMContentLoaded",a,!1),b.addEventListener("load",a,!1);else if(f.attachEvent){f.attachEvent("onreadystatechange",
a);b.attachEvent("onload",a);try{g=b.frameElement||null}catch(n){}document.documentElement.doScroll&&g&&c()}else k=b.onload,b.onload=function(){"function"===typeof k&&k();a()}}})(Annapurna,window,document);(function(g){g.Observer("fireWhenReady").subscribe(function(b){b()})})(Annapurna);(function(g){var b={};g.register=function(f,a){b[f]||(b[f]=[]);b[f].push(a);g.Observer(f).publish(this,a)};g.initialize=function(f,a){a(function(){return b[f]||null})};g.initialize("domReady",g.domReady)})(Annapurna);
(function(g){g.Redirector=function(b,f){function a(a,e,f){e(b.location.toString()||"null")&&(c=!0,d(a,function(c){f?f(c):b.location.replace(a)}))}function e(c){a(c,function(d){-1===c.indexOf("http")&&(c=f.protocol+"//"+f.host+c);if(d!==c)return!0})}function d(c,d){var a,e;a=b.referrer?b.referrer.toString():"null";g.K2&&g.K2.cookieDomain&&(e=g.K2.cookieDomain);Annapurna.Cookies("zfcReferrer").write(a,0,e);g.leq&&g.leq.push(["captureRedirect",c]);d(a)}var c=!1;return{parts:"",redirect:a,url:function(c){e(c);
return this},flush:function(c){var d,a;d=0;for(a=c.length;d<a;d++)this.push(c[d])},push:function(c){var d=c.shift();this[d]&&"function"===typeof this[d]&&this[d].apply(this,c)},buildUrl:function(c){this.toPath(c.path).withParams(c.params).withHash(c.hash);e(this.parts);return this},withDomain:function(c){this.parts=/^http/.test(c)?c:"http://"+c;return this},toPath:function(c){this.parts=c;return this},withParams:function(c){var d,a=[];if(c){if("object"===typeof c){for(d in c)a.push(d+"="+encodeURIComponent(c[d]));
c=a.join("&")}this.parts+="?"+c}return this},withHash:function(c){c&&(this.parts+="#"+c);return this},switchHost:function(c){a(c,function(d){if(f.hostname!=c)return!0},function(d){f.hostname=c})},isRedirecting:function(){return c}}}(document,location)})(window);
(function(g){var b=function(){this.init()};b.prototype={init:function(){this.setSourceClick();this.setPageTransition();this.setPageDestination()},setSourceClick:function(){if(g.K2&&g.K2.clickCookie){var b=Annapurna.CookieStorage(g.K2.clickCookie);Annapurna.Observer("tracker").subscribe(function(a,e){a.addExtension("sourceClick",function(d){return{windowId:b.get("windowId")||"",counter:b.get("counter")}})})}},setPageTransition:function(b,a){Annapurna.Observer("lazyEye:ack").subscribe(function(a,d){var c,
b,f,g,r,m;if(a&&(c=a.events)&&(b=c.length,0<b))for(f=d.get("counter"),g=b-1;0<=g;g--)if(m=c[g],m.counter==f){(r=d.get("targetUUID"))&&(c=m.pageTransition)&&c.source&&!c.destination&&(c.destination=this.getPageInfo(r,r),this.debugMode(function(){console.log("click "+m.counter+" launched window "+r)}),g==b-1&&(this.flushAll=!0),this.flushEvents());break}})},setPageDestination:function(){Annapurna.Observer("lazyEye:onload").subscribe(function(b){var a,e,d;if(b&&(b=b.events))for(a=b.length;a--;)if(e=
b[a],"REDIRECT"!==e.type&&"SUBMIT"!==e.type){"CLICK"===e.type&&(d=e.pageTransition)&&d.source&&!d.destination&&(d.destination=this.getPageInfo(),this.debugMode(function(){console.log("click "+e.counter+" landed on page "+d.destination.uuid)}));break}})}};g.ClickTransition=b})(window);
(function(g){g.ProtobufBuilder=function(){var b=Array.prototype.slice.apply(arguments),f,a,e,d={},c=[];f=b.shift();var h=Annapurna.Observer(f).publishFns(g);f=0;for(a=h.length;f<a;f++)e=h[f],"function"===typeof e&&(c=[d],c=c.concat(b),d=e.apply(g,c));return d}})(window);
Annapurna.Observer("zfc.LazyEye.Event.Element").subscribe(function(g,b){var f={image:function(){},input:function(){},select:function(){},form:function(){}};return function(){var a=b.nodeName,e=ProtobufBuilder("zfc.LazyEye.Event.Node",b),d=[];b.className&&(d=b.className.split(" "));g={node:e,classNames:d,href:b.href||null,text:ProtobufBuilder("zfc.LazyEye.Event.Value",b)};if(f[a])f[a]();return g}()});
Annapurna.Observer("zfc.LazyEye.Event.Value").subscribe(function(g,b){if(b.firstChild&&b.firstChild.data)return Annapurna.string.truncateValue(b.firstChild.data,128,function(b,a){var e={value:b};a&&(e.truncated=!0);return e})});Annapurna.Observer("zfc.LazyEye.Event.Node").subscribe(function(g,b){return{name:b.nodeName,id:b.id||null}});
(function(g,b){function f(d){var c=0;d&&(d=d.toString(),c=d.substring(0,d.length-3));return parseInt(c,10)}function a(d){var c=0;d&&(d=d.toString(),c=d.substring(d.length-3,d.length));return parseInt(c,10)}function e(d,c){var b={time:f(d),msec:a(d)};c&&(b.label=c);return b}g.ZFC&&"function"===typeof g.ZFC||(g.ZFC=ZFC=function(){},ZFC.prototype={initialize:function(d,c,a,b,e,f,g){this.pageGenTime=d;this.enterHeadTime=c;this.leaveBodyTime=null;this.upstreamLabel=a;this.upstreamHost=b;this.upstreamURI=
e;this.upstreamUUID=f;this.eventUrl=this.metadata=null;this.eventCounter=1;this.eventList=[];this.vars=[];this.uuid=g;this.checkPointList=[];this.errors=[];this.completed={};this.tests=[]},push:function(d){var c=d.shift();this[c]&&"function"===typeof this[c]?this[c].apply(this,d):Annapurna.error("No method is found for "+c+" from zfcAsync.")},setMetaData:function(d){this.metadata=d},setEventUrl:function(d){this.eventUrl=d},addFullEvent:function(d){this.eventList&&null!==d&&null!==d.type&&(d.timestamp=
(new Date).getTime(),this.eventList.push(d))},addEvent:function(d,c,a){this.eventList&&this.eventList.push({type:d,payload:c,metadata:a,timestamp:(new Date).getTime()})},addVar:function(d,c){var a={name:d};c&&(a.value=c);this.vars.push(a)},addCheckPoint:function(d,c){this.checkPointList.push(e(d,c))},addError:function(d,c,a){this.errors.push({msg:d,url:c,line:a})},leaveBody:function(d){this.leaveBodyTime=d},getMember:function(d,c){var a;(a=this[d])&&c.call(this,a)},getMember:function(d,c){"undefined"!==
typeof this[d]&&c.call(this,this[d])},recordTest:function(d,c,a,b){a="undefined"!==typeof a?a:null;b="undefined"!==typeof b?b:null;this.tests.push({name:d,treatment:c.toUpperCase(),index:a,lastIndex:b});this.completed&&this.completed.tracker&&this.sendEvent()},getUUID:function(d){if(!this.uuid){var c=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};this.uuid=c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c()}d&&d(this.uuid);return this.uuid},robot:function(){return navigator&&
navigator.userAgent&&navigator.userAgent.match(/googlebot|gomezagent/i)?1:0},tracker:function(d){var c=this,a,e,f;c.sendData(d,function(d){a=d;a.locationHref=location.href;a.upstreamLabel=c.upstreamLabel;a.upstreamHost=c.upstreamHost;a.upstreamUri=c.upstreamURI;screen&&(a.screenWidth=screen.width,a.screenHeight=screen.height,a.screenColorDepth=screen.colorDepth);b.referrer&&(a.documentReferrer=b.referrer);c.metadata&&(a.upstreamMetadata=c.metadata);if(e=Annapurna.WindowStorage().get("windowId"))a.windowId=
e;a.windowWidth=Annapurna.Dom.getWindowWidth();a.windowHeight=Annapurna.Dom.getWindowHeight();c.addTestList(a);c.vars&&c.vars.length&&(a.vars=c.vars);f=Annapurna.PB64(Protobuf.Messages.zfcTracker);Annapurna.Observer("tracker").publish(c,f,a);c.completed.tracker=!0;return f.encode("zfc.Tracker",a)},function(){Annapurna.Observer("tracker:onload").publish(c)})},onload:function(d,c,b){var k=this,g,r,m,n;k.sendData(d,function(d){m=d;m.upstreamUuid=k.upstreamUUID;m.upstreamHost=k.upstreamHost;m.upstreamUri=
k.upstreamURI;m.onloadTime=f(c);m.onloadMsec=a(c);m.pageGeneration=e(k.pageGenTime);m.enterHead=e(k.enterHeadTime);m.leaveBody=e(k.leaveBodyTime);m.onload=e(c);b&&(m.exited=1);if(k.checkPointList&&k.checkPointList.length){m.checkpoints=[];g=0;for(r=k.checkPointList.length;g<r;g++)m.checkpoints.push(k.checkPointList[g]);k.checkPointList=[]}if(k.errors&&k.errors.length){m.errors=[];g=0;for(r=k.errors.length;g<r;g++)m.errors.push(k.errors[g]);k.errors=[]}n=Annapurna.PB64(Protobuf.Messages.zfcOnload);
Annapurna.Observer("onload").publish(k,n,m);k.completed.onload=!0;return n.encode("zfc.Onload",m)})},sendEvent:function(a,c,b,e){null!==a&&this.addEvent(a,c,b);this.sendEvents(e)},sendFullEvent:function(a,c){null!==a&&null!==a.type&&this.addFullEvent(a);this.sendEvents(c)},sendEvents:function(a){var c=this;null!==c.eventUrl&&c.eventList&&c.eventList.length&&c.sendData(c.eventUrl,function(a){a={uuid:c.getUUID(),counter:c.eventCounter++,events:c.eventList};c.eventList=[];c.addTestList(a);return Annapurna.PB64(Protobuf.Messages.zfcEvent).encode("zfc.EventBundle",
a)},a)},createWindowId:function(a){var c=Annapurna.WindowStorage();c.get("windowId")||c.set("windowId",a)},sendData:function(d,c,b){if(!this.robot()){var e={},e={uuid:this.getUUID(),pageGenerationTime:f(this.pageGenTime),pageGenerationMsec:a(this.pageGenTime),enterHeadTime:f(this.enterHeadTime),enterHeadMsec:a(this.enterHeadTime)};this.leaveBodyTime&&(e.leaveBodyTime=f(this.leaveBodyTime),e.leaveBodyMsec=a(this.leaveBodyTime));Annapurna.firePixel(d,c.call(this,e),b)}},addTestList:function(a){this.tests.length&&
(a.hydra=this.tests,this.tests=[])}})})(window,document);
(function(g){var b=Protobuf.Messages.zfcCookie,f=function(){if(!(this instanceof f))return new f;this.cookie=Annapurna.Cookies("zfc");this.pb64=Annapurna.PB64(b);this.hash=this.getClientData()};f.prototype={getClientData:function(){var a;(a=this.cookie.read())?a=this.decode(a):(a={session:{timestamp:+new Date,connection:1E13*Math.random(),timestamp2:+new Date},tests:[]},this.encodeAndSet(a));return a},get:function(a){var b;if(this.hash&&(b=this.hash[a]))return b},set:function(a,b){this.hash&&a&&b&&
(this.hash[a]=b,this.encodeAndSet(this.hash))},encodeAndSet:function(a){a=this.pb64.encode("zfc.Cookie",a);this.cookie.write(a,10950,g.K2.cookieDomain)},decode:function(a){return this.pb64.decode("zfc.Cookie",a)}};g.ZFCClient=f})(window);(function(g){var b=ZFCClient().get("session"),f=+new Date(1E13<=b.timestamp2?b.timestamp2/1E3:1E13<=b.timestamp?b.timestamp/1E3:b.timestamp),a=(new Date).setHours(0,0,0,0);g.ZFCSession={isNewVisitor:function(){return f>a},isReturningVisitor:function(){return f<a}}})(window);
(function(g){window.ZFCGeo={parse:function(){var b,f,a,e={};if(b=Annapurna.Cookies("geo").read()){b=b.split("/")||[];f=0;for(a=b.length;f<a;f++)e[this.zones[f]]=b[f]||"";return e}},zones:["country","state","dma","city"]}})(window);
(function(g,b){function f(a,c,b){if(a[b]&&c[b]&&c[b]==a[b])return!0}function a(){return{input:function(a){return a.value},textarea:function(a){return a.value}}}var e=function(a,c,b){this.callbackTable={};this.setOptions(b);this.rootType=c;this.pb64=Annapurna.PB64(a);this.cookie=Annapurna.CookieStorage(this.options.clickCookie,this.options.clickLifetime/86400,this.options.cookieDomain);this.cookieAck=Annapurna.CookieStorage(this.options.clickAckCookie,this.options.clickLifetime/86400,this.options.cookieDomain);
this.windowStorage=Annapurna.WindowStorage();this.baseData={events:[]};this.eventObj={};this.target={};this.message={};this.anchor="";this.flushAll=!1;this.flushStarted=0;this.trackers={};this.options.redirecting?this.initBaseData():(this.init(),this.events())};e.prototype={setOptions:function(a){var c,b={listenDuration:1E3,textNodeMaxLength:128,cookieDomain:"",clickCookie:"click",clickAckCookie:"clickAck",clickLifetime:60,redirecting:!1},e={cookieDomain:"defaultCookieDomainCallback"};this.options=
{};if(!a)return this.options=b,this;for(c in b)this.options[c]=a[c]||b[c],e[c]&&"function"===typeof this[e[c]]&&this[e[c]].call(this);return this},flush:function(a){for(var c=0,b=a.length;c<b;c++)this.push(a[c])},push:function(a){var c=a.shift();this[c]&&"function"===typeof this[c]&&this[c].apply(this,a)},trackEvent:function(a,c,b){this.trackers[a]||(this.trackers[a]={});this.trackers[a][c]||(this.trackers[a][c]=[]);this.trackers[a][c].push(b)},defaultCookieDomainCallback:function(){this.options.cookieDomain&&
"."!==this.options.cookieDomain.charAt(0)&&(this.options.cookieDomain="."+this.options.cookieDomain)},init:function(){this.ackSourceClick();this.loadLazyEyeData();this.flushEvents(!0)},events:function(){this.captureSubmit();this.captureClick();this.captureContextMenu();this.captureChangeEvent();this.captureError();this.monitorAcknowledgedEvents()},matchCookieDomain:function(a){var c;return a?(a=a.match(/^https?:\/\/([^\/:]+)/))&&a[1]?(c=this.options.cookieDomain||"."+b.location.hostname,c=new RegExp(c.replace(/\./g,
"\\.")+"$"),c.test("."+a[1])):!0:!1},ackSourceClick:function(){var a=this.cookie.get("windowId"),c,e;a&&(c=this.windowStorage.get("windowId"),a!=c&&this.matchCookieDomain(b.referrer)&&(e=this.getZFCUUID(),c==e&&this.cookieAck.set("windowId",a).set("counter",this.cookie.get("counter")).set("targetUUID",e)),this.cookie.flush())},initBaseData:function(){var a;return(a=this.windowStorage.get("lazyEye"))?(this.baseData=this.unserialize(a),!0):!1},loadLazyEyeData:function(){this.initBaseData()&&(Annapurna.Observer("lazyEye:onload").publish(this,
this.baseData),this.flushAll=!0)},flushEvents:function(a){var c=this,b=1E3*c.options.clickLifetime,e=c.flushAll,f=c.baseData.events,g=f.length,m=0,n=[],p,u,t;if(g){u=(new Date).getTime();for(t=0;t<g;t++)p=f[t],3>=++m&&(t<g-1||e?n.push(p):u-p.timestamp>=b&&(n.push(p),e=!0));e||3<=n.length?(c.flushStarted&&u-c.flushStarted>=b&&(c.flushStarted=0),c.flushStarted||(c.debugMode(function(){console.log("sending "+n.length+" of "+g)}),c.sendData({events:n}),m-=n.length)):m=0}a&&setTimeout(function(){c.flushEvents(!0)},
m?50:c.options.listenDuration)},removeEvents:function(a){var c=this.baseData.events,b=c.length,e=[],f,g;for(g=0;g<b;g++)f=c[g],a[f.counter]||e.push(f);this.baseData.events=e},sendData:function(a){var c=this,b=a.events,e=b.length,f=c.serialize(a),g=f.length,m={};a={};var n=0,p=0,u=c.getZFCUUID(),t,v,q,w;2E4<=g&&Annapurna.error("LazyEye: "+g+" bytes for "+e+" events");for(w=0;w<e;w++)t=b[w],v=t.attempts||0,q=t.counter,4<=++v?(a[q]=1,++p):(t.attempts=v,m[q]=1,++n);p&&(c.removeEvents(a),Annapurna.error("LazyEye: removing "+
p+" events after 4 attempts"));(p||n)&&c.setLazyEyeWindowStorage();n&&(c.debugMode(function(){console.log("Loading("+g+", "+u+"): "+f)}),c.flushStarted=(new Date).getTime(),Annapurna.firePixel("/le.cgi",f,function(){c.removeEvents(m);c.setLazyEyeWindowStorage();c.flushStarted=0;c.debugMode(function(){console.log("Loaded("+g+", "+u+"): "+f)})}))},setLazyEyeWindowStorage:function(){var a=this.windowStorage,c=this.debugMode,b=this.serialize(this.baseData);b?(c(function(){console.log("storing "+b+" to lazyEye")}),
a.set("lazyEye",b)):(c(function(){console.log("clearing lazyEye")}),a.remove("lazyEye"))},monitorAcknowledgedEvents:function(){var a=this,c,b,e,f=a.options.listenDuration,g=new Date,m,n;setInterval(function(){m=new Date;n=m.getTime()-g.getTime();n>f&&(c=a.windowStorage.get("windowId"),b=Annapurna.CookieStorage(a.options.clickAckCookie),(e=b.get("windowId"))&&e==c&&(Annapurna.Observer("lazyEye:ack").publish(a,a.baseData,b),a.cookieAck.flush()))},f)},captureClick:function(){this.triggerEventData("click",
"setEventCount setClickFields setTargetElement setAnchorElement setNodeTree setPageTransitionSource setClickCookie checkForExit".split(" "))},captureContextMenu:function(){this.triggerEventData("contextmenu","setEventCount setClickFields setTargetElement setAnchorElement setNodeTree setPageTransitionSource setClickCookie".split(" "))},captureChangeEvent:function(){this.triggerEventData("change","setEventCount setClickFields setTargetElement setSelectMessage setNodeTree setPageTransitionSource".split(" "))},
captureError:function(){var a=b.getElementsByTagName("img"),c=this;Annapurna.forEach(a,function(a,b){var d=a.onerror;a.onerror=function(a){"function"===typeof d&&d(a);!a&&g.event&&g.event.srcElement&&(a=g.event,a.target=a.srcElement);c.target=a.target;c.traverseDom(c.target.parentNode);Annapurna.callbackDelegator(c,["setEventCount","setCommonFields","setTargetElement","setNodeTree","setPageTransitionSource"]);c.message.type="ERROR";c.pushEvent()}})},captureRedirect:function(a){var c;b.currentScript?
c=b.currentScript:(c=b.getElementsByTagName("script"),c=c[c.length-1]);this.target=c;this.traverseDom(c.parentNode);Annapurna.callbackDelegator(this,["setEventCount","setCommonFields","setTargetElement","setNodeTree","setPageTransitionSource"]);this.message.type="REDIRECT";this.message.target.href=a;this.pushEvent()},captureSubmit:function(){this.triggerEventData("submit","setClickFields setTargetElement setNodeTree setPageTransitionSource setClickCookie setFormSubmission".split(" "))},excludeDelegatedEvents:function(a){var c=
"disallow"+(this.target.nodeName?Annapurna.string.capFirstLetter(this.target.nodeName.toLowerCase()):"");return this[c]&&"function"===typeof this[c]?this[c].call(this,a):!1},disallowInput:function(a){if("click"===a){if(this.target.getAttribute("type")&&"checkbox"===this.target.getAttribute("type"))return!0;var c,b,e;if((c=this.baseData.events)&&0<c.length&&(a=c[c.length-1].pageX,c=c[c.length-1].pageY,b=this.eventObj.pageX,e=this.eventObj.pageY,a==b&&c==e))return!0}return!1},triggerEventData:function(a,
c){var e=this;this.callbackTable[a]=c;Annapurna.addEvent(b.body,a,function(c){var a=c.type,b=e.callbackTable[a],d;e.eventObj=c;e.target=c.target;e.anchor="";e.message={};e.target&&b&&!e.excludeDelegatedEvents(a)&&(d=e.target.parentNode)&&d.nodeName&&(e.traverseDom(d,function(c){"A"!==c.nodeName||e.anchor||(e.anchor=d)}),Annapurna.callbackDelegator(e,b),e.trackers[a]&&e.fireTrackedEvent(e.trackers[a]),e.pushEvent(),e.debugMode(function(){console.log(e.eventObj);console.log("lazyEye: ",e.unserialize(e.windowStorage.get("lazyEye")));
console.log("window.name: ",JSON.parse(window.name))}))})},fireTrackedEvent:function(a){var c,b=[];if(b=a[this.target])for(a=0,c=b.length;a<c;a++)b[a].call(this,this.message)},traverseDom:function(a,c){this.nodeTree=[];for(var b,e=c&&"function"===typeof c;a&&"BODY"!==a.nodeName&&(b={name:a.nodeName},a.id&&"string"===typeof a.id&&(b.id=a.id),e&&c.call(this,a),this.nodeTree.push(b),a=a.parentNode,a&&a.nodeName););},setCommonFields:function(){var a=this.message;a.counter=this.windowStorage.get("counter");
a.timestamp=(new Date).getTime();a.timeOnPage=this.getTimeOnPage();a.windowWidth=Annapurna.Dom.getWindowWidth();a.windowHeight=Annapurna.Dom.getWindowHeight();a.upstreamUri=g.zfcUPU||""},setEventCount:function(){var a;a=(a=this.windowStorage.get("counter"))?a+1:1;this.windowStorage.set("counter",a)},setClickFields:function(){var a=this.message;this.setCommonFields();a.pageX=this.eventObj.pageX;a.pageY=this.eventObj.pageY;a.type=this.eventObj.type.toUpperCase()},setTargetElement:function(){var a=this.message.target=
{};this.setElementInfo(a,this.target)},setAnchorElement:function(){if(this.anchor){var a=this.message.anchor={};this.setElementInfo(a,this.anchor,{skipElementCallback:!0,skipOffset:!0})}},setNodeTree:function(){this.nodeTree&&0<this.nodeTree.length&&(this.message.nodeTree=this.nodeTree.reverse())},setPageTransitionSource:function(a,c){this.message.pageTransition={source:this.getPageInfo()}},getPageInfo:function(a,c){return{uuid:a||this.getZFCUUID(),windowId:c||this.windowStorage.get("windowId")}},
setClickCookie:function(){this.cookie.set("windowId",this.windowStorage.get("windowId")).set("counter",this.windowStorage.get("counter"));this.flushAll=!1},setFormSubmission:function(){var d=this.target;if(d&&d.nodeName&&"FORM"===d.nodeName&&(this.message.target.form={name:d.name||"",action:d.action||"",method:d.method?d.method.toUpperCase():"GET"},!("https:"===b.location.protocol||d.action&&/^https/.test(d.action))&&g.formTrackers&&g.formTrackers.length)){var c,e,k,l=0,r=[],m=d.getElementsByTagName("*"),
n=a();c=0;for(e=g.formTrackers.length;c<e;c++)if(k=g.formTrackers[c],f(k,d,"id")||f(k,d,"action")||f(k,d,"name")){d=0;for(c=m.length;d<c;d++)(e=m[d])&&e.tagName&&n[e.tagName.toLowerCase()]&&(k=n[e.tagName.toLowerCase()](e),r[l]={element:{name:e.name,id:e.id||""},input:this.getValueInfo(k),type:e.tagName},l++);this.message.target.form.fields=r;break}}},setElementInfo:function(a,c,b){b=b||{};a.node={name:c.nodeName};c.id&&(a.node.id=c.id);a.classNames=Annapurna.string.splitOnSpaces(c.className);"A"===
c.nodeName&&c.href&&(a.href=c.href);c.firstChild&&(a.text=this.getValueInfo(c.firstChild.data));b.skipOffset||(a.offset=this.getOffset(c));b.skipElementCallback||(c=Annapurna.string.capFirstLetter(c.nodeName.toLowerCase()),c="set"+c+"Element",this[c]&&"function"===typeof this[c]&&this[c].call(this,a))},setImgElement:function(a){var c,b,e,f,g=[{name:"src"},{name:"title",truncate:!0},{name:"alt",truncate:!0}];a.image={};c=0;for(b=g.length;c<b;c++)if(e=g[c].name,f=this.target[e])a.image[e]=g[c].truncate?
this.getValueInfo(f):f},setInputElement:function(a){var c=this.target;a.input={type:c.type,name:c.name,disabled:c.disabled||!1};"checkbox"===c.type&&(a.input.checked=c.checked||!1)},setSelectMessage:function(){var a=this.target;a.options&&a.options.length&&(this.message.target.select={name:a.name,value:a.value,text:a.options[a.selectedIndex].text||"",multiple:a.multiple||!1})},getValueInfo:function(a){return Annapurna.string.truncateValue(a,this.options.textNodeMaxLength,function(c,a){var b={value:c};
a&&(b.truncated=!0);return b})},getOffset:function(a){return{height:0<a.offsetHeight?a.offsetHeight:0,left:0<a.offsetLeft?a.offsetLeft:0,top:0<a.offsetTop?a.offsetTop:0,width:0<a.offsetWidth?a.offsetWidth:0}},getZFCUUID:function(){return g.zfcUUID||"notta"},getTimeOnPage:function(){if(g.zfc&&zfc.enterHeadTime){var a=(new Date).getTime();if(a>zfc.enterHeadTime)return a-zfc.enterHeadTime}return 0},checkForExit:function(){var a;this.anchor&&this.anchor.href?a=this.anchor.href:this.target&&"A"===this.target.nodeName&&
(a=this.target.href);a&&!this.matchCookieDomain(a)&&(this.pushEvent(),this.flushAll=!0,this.flushEvents())},pushEvent:function(){this.message.counter&&(this.baseData.events.push(this.message),this.setLazyEyeWindowStorage(),this.message={})},debugMode:function(a){try{navigator.appName&&"Microsoft Internet Explorer"!==navigator.appName&&g.console&&g.localStorage&&localStorage.getItem("debugMode")&&a.call(this)}catch(c){}},serialize:function(a){if(a)return this.pb64.encode(this.rootType,a)},unserialize:function(a){if(a)return this.pb64.decode(this.rootType,
a)}};g.LazyEye=e})(window,document);(function(g){g.Utils={submitPerformed:function(b){return this.lastEvent(function(f){var a;if("SUBMIT"===f.type&&f.target.node)return a=f.target.node,b.call(f,a)})},lastEvent:function(b){var f=Annapurna.WindowStorage().get("lazyEye"),a=[];if(f&&(a=Annapurna.PB64(Protobuf.Messages.zfcLazyEye).decode("zfc.LazyEye",f).events||[],f=a[a.length-1]))return b.call(window,f)}}})(window.LazyEye||{});
(function(g,b){function f(c){for(var a=Math.random(),b=0,e=0,d=c.length;e<d;e++)if(b+=c[e].chance,a<b)return e;return 0}function a(c){return function(){g["hydraTest_"+c.name]=c.index}}function e(c){var a;c.callback?(a=d.VariantUtils(c.assignment),c.callback.apply(a,c.args||[])):console.error("The callback property must be included when executing a setup. Value of setup",c)}var d=function(c){this.tests=c;this.zfcClient=ZFCClient();this.assignments=this.zfcClient.get("tests")||[];this.replacements=
{};this.redirects=[];this.classNames=[];this.setups=[];this.geoTests=[];this.reassigned={};this.init()};d.prototype={init:function(){this.setupRfh();this.setupTests();this.setupClickTransition()},push:function(c){var a=c.shift();this[a]&&"function"===typeof this[a]&&this[a].apply(this,c)},geo:function(c,a){Annapurna.Observer("hydra:geo:"+c).subscribe(function(c){a.call(d.VariantUtils(c),c)})},addTest:function(c){var a;this.runTest(c)&&(this.executeTestProcess("post",c),this.zfcClient.set("tests",
this.assignments),this.executeRedirects(),a=Annapurna.lastElement(this.setups),e(a),Annapurna.inArray(c.name,this.geoTests)&&this.publishGeoTest(c.name))},retireTest:function(c){var a,b,e,d={};a=0;for(b=this.assignments.length;a<b;a++)d[this.assignments[a].name]=1;if("string"===typeof c)e=c,d[e]&&(this.removeAssignment(e),this.zfcClient.set("tests",this.assignments));else for(a=0,b=c.length;a<b;a++)e=c[a],d[e]&&(this.removeAssignment(e),this.zfcClient.set("tests",this.assignments))},flush:function(a){for(var b=
0,e=a.length;b<e;b++)this.push(a[b])},setupRfh:function(){var a=Annapurna.Cookies("rfh"),b=a.read(),e,d,f;if(b){f=b.split(",");b=0;for(e=f.length;b<e;b++)if(d=f[b].split(":"),2===d.length){var m=d[1]|0;0<=m&&16>m&&(this.replacements[d[0]]=m,d=this.getAssignment(d[0]))&&(d.index=m)}a.write("",-1,g.K2.cookieDomain)}},setupTests:function(){var a,b;if(this.tests){a=0;for(b=this.tests.length;a<b;a++)this.runTest(this.tests[a]);this.executePostTests();this.zfcClient.set("tests",this.assignments);this.executeRedirects();
this.executeTests();this.executeGeoTests()}},runTest:function(a){var b,e;b=!(a.excludeUrl&&zfcUPU.match(new RegExp(a.excludeUrl)))&&(!a.url||zfcUPU.match(new RegExp(a.url)));if(a.variants)a:{e=a.variants;var d=e.length,f,g;for(g=0;g<d;g++)if((f=e[g].redirect)&&"param"===f){e=!0;break a}e=!1}else e=!1;this.executePreTest(a);this.activateDeferredTest(a);if(b||e){this.createWeightedTest(a);e=this.activateAssignOperation(a,b);if("undefined"!==typeof e)return e;this.activatePercentageTest(a,b);return!0}},
executePreTest:function(a){this.executeTestProcess("pre",a)},executePostTests:function(){var a,b;a=0;for(b=this.tests.length;a<b;a++)this.executeTestProcess("post",this.tests[a])},executeTestProcess:function(a,b){if(b[a]&&"function"===typeof b[a])b[a](b)},activateAssignOperation:function(a,b){var e,f,g,m=!0;if(a.assign&&"function"===typeof a.assign)return f=this.determineAssignment(a),g=d.Storage.create(a.name),e=d.AssignUtils(a,f),(e=a.assign.call(e,g))?(a.url&&!b&&(m=!1),e.geo&&!this.matchGeo(a,
e)&&(this.removeAssignment(a.name),m=!1),m&&(this.activateTest(f,a.timestamp),g="run"+Annapurna.string.capFirstLetter(typeof e)+"AssignTest",this[g]&&"function"===typeof this[g]&&this[g].call(this,e,f,a))):f.active||this.removeAssignment(a.name),m},runBooleanAssignTest:function(a,b,e){this.setupTestPhase(e,b);this.addPageTestTreatment(e,b);this.setupActiveVariant(e,b)},runStringAssignTest:function(a,b,e){e[a]&&"function"===typeof e[a]?(b.segment=a,this.setups.push({callback:e[a],assignment:b})):console.error("when returning assign as a string, the returned value must appear in the test Object and be a function.")},
runObjectAssignTest:function(a,b,e){var d=a.args||[],g;a.callback&&"string"===typeof a.callback&&e[a.callback]&&"function"===typeof e[a.callback]?(b.segment=a.callback,g=e[a.callback],this.setups.push({callback:g,args:d,assignment:b})):a.test&&"string"===typeof a.test&&(e.tests&&e.tests[a.test]||e[a.test])&&(e.tests&&e.tests[a.test]?e.variants=e.tests[a.test]:e[a.test]&&(e.variants=e[a.test]),b.segment=a.test,!b.index&&e.variants&&(b.index=f(e.variants)));"number"===typeof a.chance&&this.setupChanceTestPhase(a,
e,b);this.setupTestPhase(e,b);this.addPageTestTreatment(e,b);this.setupActiveVariant(e,b,d)},activatePercentageTest:function(a,b){var e=this.determineAssignment(a);this.setupTestPhase(a,e);b&&(this.addPageTestTreatment(a,e),this.activateTest(e,a.timestamp),this.setupActiveVariant(a,e))},activateDeferredTest:function(a){if(a.defer&&"function"===typeof a.defer){var b=this,e=g.onload,f,r,m,n;g.onload=function(){"function"===typeof e&&e();f=d.Storage.create(a.name);r=d.Operator(b,a,f);m=r.getAssignment();
n=d.DeferUtils(a,m);a.defer.call(n,r,f);return!0}}},removeAssignment:function(a){var b,e,d;b=0;for(e=this.assignments.length;b<e;b++)d=this.assignments[b],d.name===a&&(this.assignments.splice(b,1),e=this.assignments.length,b--)},setupActiveVariant:function(c,b,e){var d;e=e||[];c.variants&&(d=c.variants[b.index],c=Annapurna.lastElement(c.variants),d&&(d.setup?this.setups.push({callback:d.setup,args:e,assignment:b}):d.redirect?(b.redirect=d.redirect,"domain"===d.redirect&&(b.domain=d.domain),this.redirects.push(b)):
!c.setup&&c.chance&&(e=a(b),this.setups.push({callback:e,assignment:b}))))},activateTest:function(a,b){a.active=1;b&&(a.timestamp=+new Date)},executeRedirects:function(){if(this.redirects.length){var a=this.zfcTestRedirect(b.location.toString());rq.push(["url",a])}},executeTests:function(){for(var a=0,b=this.setups.length;a<b;a++)e(this.setups[a])},executeGeoTests:function(){var a,b;if(this.geoTests&&(b=this.geoTests.length))for(a=0;a<b;a++)this.publishGeoTest(this.geoTests[a])},setupClickTransition:function(){var a=
this,b=g.onload;g.onload=function(){"function"===typeof b&&b();a.bindClickTransition()}},bindClickTransition:function(){var a=this;Annapurna.addEvent(b.body,"click",function(b){var e,d,f,g,n;for(b=b.target;b&&"A"!==b.tagName;)b=b.parentNode;if((n=b)&&"A"===n.tagName&&a.tests){a.redirects=[];b=0;for(e=a.tests.length;b<e;b++)(d=a.tests[b])&&d.name&&(f=a.getAssignment(d.name))&&(g=d.variants[f.index||0])&&g.redirect&&"domain"!=g.redirect&&(n.href&&n.href.match(new RegExp(d.url||null))||n.className&&
n.className.match(new RegExp(d.className||null)))&&(f.redirect=g.redirect,a.redirects.push(f));a.redirects.length&&(n.href=a.zfcTestRedirect(n.href))}})},getAssignment:function(a){for(var b=0,e=this.assignments.length;b<e;b++)if(this.assignments[b].name==a)return this.assignments[b];return null},zfcTestRedirect:function(a){var e=this.zfcTestsURL();var d=e.domain;if(a&&d){var f=b.location;if(f.protocol.match(/https/)||f.host.match(/secure-/))d="secure-"+d;a=a.replace(/:\/\/[^:\/]+/,"://"+d)}e=(e=e.param)?
Annapurna.Url.replaceParam(a,g.K2.hydra.testParam,encodeURIComponent(decodeURIComponent(e))):a;return e},zfcTestsURL:function(){var a,b,e,d=[],f=null;a=0;for(b=this.redirects.length;a<b;a++)e=this.redirects[a],e.domain?f=e.domain:"param"==e.redirect&&d.push(e.name+":"+e.index);return{domain:f,param:d.join(",")}},setupChanceTestPhase:function(a,b,e){var d,f,g=b.variants;if(d=g.length)for(b=0;b<d;b++)if(f=g[b],f.chance&&"function"===typeof f.chance){if(f.chance(a.chance)){e.index!==b&&(e.index=b);e.ignorePhase=
!0;break}}else console.error("[hydra] When returning a property of chance, the group must have a chance property and it must be a function.");else console.error("[hydra] At least on variant is required when doing a custom chance test.")},publishGeoTest:function(a){var b=this.getAssignment(a);Annapurna.Observer("hydra:geo:"+a).publish(this,b)},matchGeo:function(a,b){if(b.geo&&"object"===typeof b.geo){var e=this,d,f,g,n,p,u,t,v=ZFCGeo.parse();if(v){p=ZFCGeo.zones;t=b.geo;d=0;for(f=p.length;d<f;d++)if(g=
p[d],n=t[g])if("string"===typeof n&&n===v[g])u=!0;else if("object"===typeof n&&Annapurna.inArray(v[g],n))u=!0;else if(t.strict){u=!1;break}if(u)return e.geoTests.push(a.name),!0}else Annapurna.Observer("tracker:onload").subscribe(function(){e.addTest(a)})}},setupTestPhase:function(a,b,e){a.phase&&this.reassigned[a.name]?(b.phase=a.phase,b.ignorePhase||(b.index=f(a.variants)),this.replacements[a.name]&&(this.assignments.index=this.replacements[a.name])):a.phase||(a.phase=1)},determineAssignment:function(a){var b=
this.getAssignment(a.name);b?a.phase>b.phase&&(this.reassigned[a.name]={lastIndex:b.index}):(b={name:a.name,phase:a.phase},a.variants&&a.variants.length&&(a.variants[0].chance||0===a.variants[0].chance)&&(b.index=f(a.variants)),b.inital=!0,this.assignments.push(b),this.replacements[a.name]&&(this.assignments.index=this.replacements[a.name]));return b},createWeightedTest:function(a){var b,e;if(!a.variants&&a.weights&&a.weights.length){a.variants=[];b=0;for(e=a.weights.length;b<e;b++)a.variants.push({chance:a.weights[b]});
delete a.weights}},addTestTreatment:function(a,b,e){var d,f=b.index,g;this.reassigned[b.name]?(d="reassigned",g=this.reassigned[b.name].lastIndex):d=b.inital?"assigned":"applied";e.call(this,a.name,d.toUpperCase(),f,g)},addPageTestTreatment:function(a,b){this.addTestTreatment(a,b,function(a,c,e,d){b.active&&window.zfc&&zfc.push(["recordTest",a,c,e,d])})}};g.Hydra=d})(window,document);
(function(g){g.Utils={getTest:function(b){var f,a,e=ZFCClient().get("tests");f=0;for(a=e.length;f<a;f++)if(e[f].name==b)return e[f]},updateRedirectParams:function(b,f,a){var e,d,c=[],g,k;e="";if(-1!==b.indexOf(window.K2.hydra.testParam)){if(b=b.match(new RegExp(window.K2.hydra.testParam+"=([^&]+)"))||[],b[1]){e=decodeURIComponent(b[1]);g=e.split(",");e=0;for(b=g.length;e<b;e++)d=g[e].split(":"),d[0]==f?(c.push(this.appendTest(d[0],a)),k=!0):c.push(g[e]);k||c.push(this.appendTest(f,a));e=c.join(",")}}else e=
this.appendTest(f,a);return e},appendTest:function(b,f){return b+":"+f},getTestParams:function(b,f,a){b=b||window.hydraTests;a=a||{encode:!1};var e,d,c,g={},k=[],l=ZFCClient().get("tests");e=0;for(d=b.length;e<d;e++)g[b[e].name]=b[e];e=0;for(d=l.length;e<d;e++)b=l[e],g[b.name]&&g[b.name].variants&&b.active&&(c=g[b.name].variants,c[0]&&c[0].redirect&&"param"===c[0].redirect&&(!f||f&&g[b.name].url&&(new RegExp(g[b.name].url)).test(f))&&k.push(this.appendTest(b.name,b.index)));return k.length?(f=k.join(","),
a.encode&&(f=encodeURIComponent(f)),window.K2.hydra.testParam+"="+f):null}}})(window.Hydra||{});
(function(g){function b(f,a){if(!(this instanceof b))return new b(f,a);this.test=f;this.assignment=a}b.prototype.isMobile=function(){return/iPhone|iPad|Android/.test(navigator.userAgent)};b.prototype.assignToCustomer=function(){var b=Annapurna.CookieStorage("holmes",0,window.K2.cookieDomain).get("customerId");if(b)return b%100};b.prototype.setupTrystAssignment=function(){var b=Annapurna.CookieStorage("holmes",0,window.K2.cookieDomain),a=Annapurna.CookieStorage("watson",0,window.K2.cookieDomain),b=
b.get(this.test.name);this.assignment.index!==b&&("number"===typeof b?this.assignment.index=b:(b=a.get(this.test.name),"number"===typeof b?this.assignment.index=b:a.set(this.test.name,this.assignment.index)));return this.assignment.ignorePhase=!0};g.AssignUtils=b})(window.Hydra||{});
(function(g,b,f){function a(b){if(!(this instanceof a))return new a(b);this.assignment=b}a.prototype={redirect:function(a){rq.push(["url",a])},switchHost:function(a){rq.push(["switchHost",a])}};f.VariantUtils=a})(window,document,window.Hydra||{});
(function(g){function b(f,a){if(!(this instanceof b))return new b(f,a);this.test=f;this.assignment=a}b.prototype={submitSearch:function(b){Annapurna.addEvent(document.getElementById("globalSearch"),"submit",function(a){var e=a.target[1];e&&e.value&&b.call(this,a,e)})}};g.DeferUtils=b})(window.Hydra||{});
Annapurna.Observer("hydra:operator").subscribe(function(g){function b(){}Annapurna.extend(b,g);b.prototype.register=function(){this.addOperation("activate");this.addOperation("preactivate");this.addOperation("deactivate")};b.prototype.preactivate=function(b){var a=this,e;Hydra.Storage.append(a.test.name);a.hydra.setupTestPhase(a.test,a.assignment);a.recordAssignments();e=a.getVariantContext();b.call(e,function(b){a.finalize(b)})};b.prototype.deactivate=function(){delete this.assignment.active;this.refreshTests()};
b.prototype.activate=function(b){this.hydra.setupTestPhase(this.test,this.assignment);this.finalize(b)};b.prototype.finalize=function(b){var a=this.getVariantContext();Hydra.Storage.append(this.test.name);this.hydra.activateTest(this.assignment);this.recordAssignments();b&&b.call(a)};return b});
Annapurna.Observer("hydra:operator").subscribe(function(g){function b(){}Annapurna.extend(b,g);b.prototype.register=function(){this.addOperation("submit");this.addOperation("submit:action",this.action);this.addOperation("submit:field",this.field)};b.prototype.submit=function(b,a,e){this.proxy(b,[a,e])};b.prototype.action=function(b,a){var e=this,d=typeof b,c;e.submitEvent(document.body,function(g){function k(a){var b=e.hydra.assignment,d=c.getAttribute("action"),b=Hydra.Utils.updateRedirectParams(d,
b.name,b.index);c.action=Annapurna.Url.replaceParam(d,window.K2.hydra.testParam,encodeURIComponent(b));a&&a()}c=g.target;e.trackOperation("submit",c);if("string"===d&&c.id==b||"object"===d&&Annapurna.inArray(c.id,b))a?a.call(e.getVariantContext(e.hydra.assignment),g,k):k()})};b.prototype.field=function(b,a){var e=typeof b,d,c;if("string"===e){if(c=document.getElementById(b))this.trackOperation("submit",c),this.injectHiddenField(c,a)}else if("object"===e)for(e=0,d=b.length;e<d;e++)if(c=document.getElementById(b[e]))this.trackOperation("submit",
c),this.injectHiddenField(c,a)};b.prototype.injectHiddenField=function(b,a){var e=this;e.on("preactivate",function(d){var c,g=this.assignment,k=window.K2.hydra.testParam,l=k+"-"+b.id;(c=document.getElementById(l))?c.value=Hydra.Utils.updateRedirectParams(c.value,g.name,g.index):(c=document.createElement("input"),c.type="hidden",c.id=l,c.name=k,c.value=Hydra.Utils.appendTest(g.name,g.index),b.appendChild(c));e.submitEvent(b,function(b){a?a.call(e.getVariantContext(),b,d):d()})})};b.prototype.submitEvent=
function(b,a){Annapurna.addEvent(b,"submit",a)};return b});
Annapurna.Observer("hydra:operator").subscribe(function(g){function b(){}Annapurna.extend(b,g);b.prototype.register=function(){this.addOperation("click");this.addOperation("click:anchor",this.anchor)};b.prototype.click=function(b,a){this.proxy(b,[a])};b.prototype.anchor=function(b){function a(a,b){e.trackOperation("click",a);e.on("activate",function(){var f,g;if(f=a.getAttribute("href"))g=Hydra.Utils.updateRedirectParams(f,this.assignment.name,this.assignment.index),f=Annapurna.Url.replaceParam(f,
window.K2.hydra.testParam,encodeURIComponent(g)),a.href=f,b&&b.call(e.getVariantContext())})}var e=this;e.clickEvent(function(d){b.call(e.getVariantContext(),d,a)})};b.prototype.clickEvent=function(b){Annapurna.addEvent(document.body,"click",b)};return b});
(function(g){function b(){this.hydra={};this.test={};this.assignment={};this.operationList=[];this.operations={}}function f(a,b){if(!(this instanceof f))return new f(a,b);this.hydra=a;this.test=b;this.assignment=a.determineAssignment(b);this.operations={}}Annapurna.implement(["register"]);b.prototype.init=function(a,b,d,c){this.hydra||(this.hydra=a,this.test=b,this.assignment=d,this.operations=c);return this};b.prototype.addOperation=function(a,b){this.operationList||(this.operationList=[]);this.operationList.push({name:a,
context:this,callback:b||this[a]})};b.prototype.consumeOperations=function(){this.register();return this};b.prototype.concatOperations=function(a){var b,d,c;if(this.operationList&&(d=this.operationList.length))for(b=0;b<d;b++)c=this.operationList[b],a[c.name]=c;return a};b.prototype.on=function(a){var b,d,c;c=Array.prototype.slice.apply(arguments);c.shift();(b=this.operations[a])?(d=b.callback)&&"function"===typeof d?(b.context.init(this.hydra,this.test,this.assignment,this.operations),d.apply(b.context,
c)):Annapurna.error("[operator] No callback was specific for the action "+a):Annapurna.error("[operator] [operator] No instance was found under the action "+a)};b.prototype.proxy=function(a,b){this[a]&&"function"===typeof this[a]&&this[a].apply(this,b)};b.prototype.recordAssignments=function(){this.hydra.zfcClient.set("tests",this.hydra.assignments)};b.prototype.getVariantContext=function(){return Hydra.VariantUtils(this.assignment)};b.prototype.trackOperation=function(a,b){var d=this;window.leq&&
window.leq.push(["trackEvent",a,b,function(a){d.hydra.addTestTreatment(d.test,d.assignment,function(b,e,d,f){a.hydra||(a.hydra=[]);a.hydra.push({name:b,treatment:e,index:d,lastIndex:f})})}])};f.prototype.on=function(a){var e,d,c,f,g={};f=Annapurna.Observer("hydra:operator").publish(window,b);e=0;for(d=f.length;e<d;e++)c=new f[e],g=c.consumeOperations().concatOperations(g);c.init(this.hydra,this.test,this.assignment,g);c.on.apply(c,arguments)};f.prototype.getAssignment=function(){return this.assignment};
g.Operator=f})(window.Hydra||{});
(function(g){function b(){a||(a=f.create("hydra"));return a}var f={},a;f.scheduler=function(){Annapurna.Scheduler("hydra",7).operation(function(a){var d,c,f={};c=ZFCClient().get("tests");var g=b().get("storage");if(c)for(a=0,d=c.length;a<d;a++)f[c[a].name]=1;if(g)for(a=0,d=g.length;a<d;a++)c=g[a],f[c]||(Annapurna.Storage(c).flush(),g.splice(a,1),b().set("storage",g),d=g.length,a--)}).execute()};f.append=function(a){var d=f.create(a),c=b().get("storage")||[];!Annapurna.inArray(a,c)&&d.hasFields()&&
(c.push(a),b().set("storage",c))};f.create=function(a){return Annapurna.Storage(a)};g.Storage=f})(window.Hydra||{});
(function(g,b){function f(){if(!(this instanceof f))return new f;this.trackers=[];this.impressionBundle={uuid:g.zfcUUID,counter:1,treeDict:[],impressions:[]};this.windowStorage=Annapurna.WindowStorage();this.elementCache={};this.nodeTreeCache={};this.nodeTreeIdMap={};this.nodeTreeId=0;this.startTimeout=500;this.stopTimeout=3E4;this.minOverlap=10;this.checkStashed()}f.prototype.flush=function(a){var b,d;b=0;for(d=a.length;b<d;b++)this.push(a[b])};f.prototype.push=function(a){this.wait(a)()};f.prototype.wait=
function(a){var b=this;return function(){0<b.getFilteredElements(a).length?(a.startTimestamp=0,a.activeElements=[],a.last=!0,0<b.trackers.length?b.trackers[b.trackers.length-1].last=!1:a.first=!0,b.trackers.push(a),b.watchViewport(a),b.watchEvents(a)):setTimeout(b.wait(a),100)}};f.prototype.trackerName=function(a){return a.id?a.id:a.label?a.label:"<anonymous>"};f.prototype.watchEvents=function(a){this.watchEvent(a,"scroll",!0);this.watchEvent(a,"resize",!0);this.watchEvent(a,"orientationchange",!0);
this.watchEvent(a,"hashchange",!0);this.watchEvent(a,"click",!1);this.watchEvent(a,"beforeunload",!1)};f.prototype.watchEvent=function(a,b,d){var c=this;Annapurna.addEvent(g,b,function(f){c.stopViewport(a,d);c.watchViewport(a,b)})};f.prototype.watchViewport=function(a){var b=this;a.startImpressions&&clearTimeout(a.startImpressions);a.stopImpressions&&clearTimeout(a.stopImpressions);a.startImpressions=setTimeout(function(){b.initViewport(a,b.startTimeout);a.stopImpressions=setTimeout(function(){b.stopViewport(a,
!0)},b.stopTimeout)},b.startTimeout)};f.prototype.initViewport=function(a,b){var d,c,f,g;a.startTimestamp=+new Date-b;f=this.getFilteredElements(a);d=0;for(c=f.length;d<c;d++)g=f[d],this.overlap(g)>=this.minOverlap&&a.activeElements.push(g)};f.prototype.stopViewport=function(a,b){var d=this.impressionBundle,c=a.startTimestamp,f=+new Date-c,g,l,r;a.first&&b&&this.checkStashed();g=0;for(l=a.activeElements.length;g<l;g++)r=a.activeElements[g],d.impressions.push({element:this.buildElement(r),context:this.getElementContext(r),
timestamp:c,duration:f}),8<=d.impressions.length&&this.flushBundle(b);a.last&&this.flushBundle(b);a.activeElements=[];a.startTimestamp=0};f.prototype.getElements=function(a){var e=[],d;a.elements?e=a.elements:a.id&&(d=b.getElementById(a.id),a.tagName?e=d.getElementsByTagName(a.tagName):e.push(d));return e};f.prototype.getFilteredElements=function(a){var b=this.getElements(a),d=[],c,f;c=0;for(f=b.length;c<f;c++)element=b[c],a.filter&&!a.filter(element)||d.push(element);return d};f.prototype.buildElement=
function(a){var b;(b=this.elementCache[a])||(b=ProtobufBuilder("zfc.LazyEye.Event.Element",a),b=this.elementCache[a]=b);return b};f.prototype.getElementContext=function(a){var b=0,d,c=[],f={};if(a.parentNode&&this.nodeTreeCache[a.parentNode])d=this.nodeTreeCache[a.parentNode];else{for(;a.parentNode&&"BODY"!==a.nodeName;)a=a.parentNode,0===b&&(d=this.nodeTreeId+=1,this.nodeTreeCache[a.parentNode]=d),f=ProtobufBuilder("zfc.LazyEye.Event.Node",a),c.push(f),b++;this.nodeTreeIdMap[d]=c}return d};f.prototype.fillTreeDict=
function(){var a={},b=this.impressionBundle,d=b.impressions,c,f,g;b.treeDict=[];c=0;for(f=d.length;c<f;c++)g=d[c].context,a[g]||(b.treeDict.push({id:g,tree:this.nodeTreeIdMap[g]}),a[g]=!0)};f.prototype.packBundle=function(){var a=this.impressionBundle,b;0<a.impressions.length&&(this.fillTreeDict(),b=Annapurna.PB64(Protobuf.Messages.zfcImpression).encode("zfc.ImpressionBundle",a),this.resetBundle());return b};f.prototype.stashBundle=function(){var a=this.packBundle(),b;a&&(b=this.windowStorage.get("impressionBundles")||
[],b.push(a),this.windowStorage.set("impressionBundles",b))};f.prototype.checkStashed=function(){var a=this.windowStorage.get("impressionBundles"),b,d;if(a){b=0;for(d=a.length;b<d;b++)Annapurna.firePixel("/ib.cgi",a[b]);this.windowStorage.remove("impressionBundles")}};f.prototype.flushBundle=function(a){0<this.impressionBundle.impressions.length&&(a?Annapurna.firePixel("/ib.cgi",this.packBundle()):this.stashBundle())};f.prototype.resetBundle=function(){var a=this.impressionBundle;a.counter+=1;a.impressions=
[];a.treeDict=[]};f.prototype.overlap=function(a){a=a.getBoundingClientRect();var b=g.innerHeight,d=g.innerWidth,c,f,k,l,r=0;if(0<=a.bottom&&a.top<=b&&0<=a.right&&a.left<=d)return c=a.bottom-a.top,k=a.right-a.left,f=0>a.top?a.bottom:c,l=0>a.left?a.right:k,a.bottom>b&&(f-=a.bottom-b),a.right>d&&(l-=a.right-d),0<f&&0<c&&0<l&&0<k&&(r=Math.round(f/c*100*(l/k))),r};g.Impressions=f})(window,document);
(function(g){function b(){Annapurna.Observer("tracker:onload").subscribe(function(){var b=g.zfcXDHost,a=Annapurna.WindowStorage().get("windowId"),e=g.zfcUUID;b&&e&&a===e&&(b=location.protocol+"//"+b+"/xd.cgi",Annapurna.firePixel(b,"uuid="+e))})}Annapurna.register("fireWhenReady",function(){Annapurna.Protobuf.config({extensions:Protobuf.Extensions,base:Protobuf.Messages});b();new ClickTransition;if(g.todo){var f=todo;todo=new Annapurna.Queue;todo.flush(f)}g.impq&&(f=g.impq,g.impq=new Impressions,g.impq.flush(f));
if(g.zfc){f=zfc;zfc=new ZFC;for(var a=0,e=f.length;a<e;a++)zfc.push(f[a]);g.zfcBackup=zfc}g.rq&&(f=g.rq.list||[],g.rq=Redirector,g.rq.flush(f));g.rq.isRedirecting()||(f=[],g.hq&&g.hq.list&&g.hq.list.length&&(f=g.hq.list),g.hq=new Hydra(g.hydraTests),g.hq.flush(f))})})(window);
